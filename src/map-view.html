<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/voyent-web-components/voyent-location-editor/voyent-location-editor.html">
<link rel="import" href="shared-styles.html">

<dom-module id="map-view">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
            }
        </style>
        
        <voyent-location-editor height="{{height}}" width="100%"></voyent-location-editor>
    </template>

    <script>
        Polymer({
            is: 'map-view',
            
            properties: {
                visible: {
                    type: Boolean,
                    value: false
                },
                height: { type: Number,
                    value: 500,
                    notify: true
                }
            },
            
            ready: function() {
                var _this = this;
                window.addEventListener("resize", function() {
                    _this.calcHeight();
                });
            },
            
            attached: function() {
                this.calcHeight();
            },
            
            calcHeight: function() {
                var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                
                if (document.getElementById("mainHeader")) {
                    var headerHeight = document.getElementById("mainHeader").clientHeight;
                    if (headerHeight) {
                        h -= headerHeight;
                    }
                }
                
                console.log("Setting map height to " + h);
                this.set("height", h);
            }
        });
    </script>
</dom-module>
